# Development Standards - Tulumbak E-Commerce Platform

**Version**: 1.0.0
**Last Updated**: 2025-11-13
**Team**: Senior Full-Stack Development Team

---

## üéØ Core Principles

> **"Excellence is not an act, but a habit"** - Aristotle

This document defines the **non-negotiable** standards for all code written in this project. Every AI assistant, developer, and contributor MUST adhere to these principles.

---

## 1. Code Quality Standards

### CLEAN CODE (Mandatory)
- **Single Responsibility Principle (SRP)**: One class/function = one responsibility
- **DRY (Don't Repeat Yourself)**: Abstract common functionality
- **KISS (Keep It Simple, Stupid)**: Prefer simplicity over complexity
- **YAGNI (You Aren't Gonna Need It)**: Build only what's needed NOW

### SOLID Principles (Backend & OOP)
```javascript
// ‚úÖ GOOD: Single Responsibility
class EmailRenderer {
  async renderTemplate(type, data) { }
}

class EmailSender {
  async send(recipient, content) { }
}

// ‚ùå BAD: Multiple Responsibilities
class EmailService {
  async renderAndSend() { } // TOO MUCH!
}
```

### Naming Conventions
```javascript
// Classes: PascalCase
class EmailRenderer { }

// Functions/Methods: camelCase
function renderTemplate() { }

// Constants: UPPER_SNAKE_CASE
const MAX_RETRIES = 3;

// Private: _prefixed
_privateMethod() { }
```

---

## 2. Architecture Standards

### Separation of Concerns
```
backend/
‚îú‚îÄ‚îÄ controllers/     # HTTP request handlers
‚îú‚îÄ‚îÄ services/        # Business logic (NO HTTP knowledge)
‚îú‚îÄ‚îÄ models/          # Data schemas
‚îú‚îÄ‚îÄ utils/           # Pure utility functions
‚îú‚îÄ‚îÄ middleware/      # Request processing
‚îî‚îÄ‚îÄ config/          # Configuration management
```

### Service Layer Pattern
```javascript
// ‚úÖ GOOD: Pure business logic
class UserService {
  async createUser(userData) {
    // Business logic only
    return await UserModel.create(userData);
  }
}

// Controller uses service
async function createUserController(req, res) {
  const user = await userService.createUser(req.body);
  res.json({ success: true, user });
}
```

---

## 3. Error Handling Standards

### Comprehensive Error Handling
```javascript
// ‚úÖ GOOD: Structured error handling
class EmailService {
  async sendEmail(recipient, content) {
    try {
      // Validate inputs
      if (!recipient) {
        throw new ValidationError('Recipient is required');
      }

      // Business logic
      const result = await this.transport.sendMail({
        to: recipient,
        html: content
      });

      logger.info('Email sent successfully', {
        recipient,
        messageId: result.messageId
      });

      return { success: true, messageId: result.messageId };

    } catch (error) {
      logger.error('Email sending failed', {
        error: error.message,
        recipient,
        stack: error.stack
      });

      return {
        success: false,
        message: error.message,
        code: error.code
      };
    }
  }
}
```

---

## 4. Documentation Standards

### JSDoc for All Public Methods
```javascript
/**
 * Renders an email template with provided data
 * @param {string} templateType - Template identifier (e.g., 'orderConfirmation')
 * @param {Object} data - Template data object
 * @param {string} data.customerName - Customer's full name
 * @param {string} data.orderId - Order identification number
 * @returns {Promise<{subject: string, html: string}>} Rendered email
 * @throws {ValidationError} When template type is invalid
 * @example
 * const email = await renderer.renderTemplate('orderConfirmation', {
 *   customerName: 'John Doe',
 *   orderId: 'ORD-12345'
 * });
 */
async renderTemplate(templateType, data) {
  // Implementation
}
```

---

## 5. Testing Standards

### Test Coverage Requirements
- **Critical Paths**: 100% coverage (authentication, payments)
- **Business Logic**: 80% minimum coverage
- **Utilities**: 70% minimum coverage

### Test Structure
```javascript
describe('EmailService', () => {
  describe('sendEmail', () => {
    it('should send email successfully with valid data', async () => {
      // Arrange
      const recipient = 'test@example.com';
      const content = '<h1>Test</h1>';

      // Act
      const result = await emailService.sendEmail(recipient, content);

      // Assert
      expect(result.success).toBe(true);
      expect(result.messageId).toBeDefined();
    });

    it('should handle SMTP errors gracefully', async () => {
      // Test error scenarios
    });
  });
});
```

---

## 6. Security Standards

### Input Validation (Always)
```javascript
// ‚úÖ GOOD: Validate before processing
async function createOrder(orderData) {
  // Validate
  const validation = validateOrderData(orderData);
  if (!validation.isValid) {
    throw new ValidationError(validation.errors);
  }

  // Sanitize
  const sanitized = sanitizeOrderData(orderData);

  // Process
  return await OrderModel.create(sanitized);
}
```

### No Secrets in Code
```javascript
// ‚ùå BAD
const apiKey = "sk_live_abc123";

// ‚úÖ GOOD
const apiKey = process.env.API_KEY;
```

---

## 7. Performance Standards

### Async/Await Best Practices
```javascript
// ‚úÖ GOOD: Parallel operations
const [user, orders, settings] = await Promise.all([
  User.findById(userId),
  Order.find({ userId }),
  Settings.findOne()
]);

// ‚ùå BAD: Sequential (slow)
const user = await User.findById(userId);
const orders = await Order.find({ userId });
const settings = await Settings.findOne();
```

### Caching Strategy
- Cache expensive operations
- Use appropriate TTL values
- Invalidate cache on updates

---

## 8. Git Commit Standards

### Commit Message Format
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Types**: feat, fix, docs, style, refactor, test, chore

**Examples**:
```
feat(email): Add React Email template system

- Created EmailRenderer service with OOP architecture
- Implemented OrderConfirmation template
- Added design settings integration

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## 9. Code Review Checklist

Before any code is considered "done":

- [ ] **Clean Code**: SRP, DRY, KISS applied
- [ ] **Error Handling**: All errors caught and logged
- [ ] **Documentation**: JSDoc for public methods
- [ ] **Tests**: Coverage meets requirements
- [ ] **Security**: Input validation, no secrets
- [ ] **Performance**: No obvious bottlenecks
- [ ] **Standards**: Follows naming conventions
- [ ] **Logging**: Appropriate log levels used

---

## 10. AI Assistant Instructions

**For All AI Assistants Working on This Project:**

1. **READ THIS FILE FIRST** before any implementation
2. **NEVER compromise on these standards** for speed
3. **ASK questions** if standards conflict with requirements
4. **PROPOSE alternatives** if you see a better way
5. **DOCUMENT changes** to this file if standards evolve

---

## üìö References

- **Clean Code** by Robert C. Martin
- **SOLID Principles** - Object-Oriented Design
- **Node.js Best Practices** - goldbergyoni/nodebestpractices
- **JavaScript Standard Style** - standardjs.com

---

## üîÑ Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 1.0.0 | 2025-11-13 | Initial standards document | Senior Dev Team |

---

**Remember**:
> "Any fool can write code that a computer can understand. Good programmers write code that humans can understand." - Martin Fowler

**Our Commitment**:
> "We are not just writing code. We are crafting a maintainable, scalable, production-grade e-commerce platform that will serve thousands of customers reliably."

---

**üö® NON-NEGOTIABLE RULES**:
1. NO shortcuts that compromise quality
2. NO "TODO" comments without tracking tickets
3. NO commits without meaningful messages
4. NO code without error handling
5. NO production code without tests

---

_This document is a living standard. It evolves as we learn, but the core principles remain sacred._
